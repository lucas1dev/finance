openapi: 3.0.0
info:
  title: API do Sistema Financeiro
  description: API para gerenciamento de finanças pessoais
  version: 1.0.0
  contact:
    name: Suporte
    email: suporte@finance.com

servers:
  - url: http://localhost:3001
    description: Servidor de Desenvolvimento

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    User:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        email:
          type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Account:
      type: object
      properties:
        id:
          type: integer
        user_id:
          type: integer
        bank_name:
          type: string
        account_type:
          type: string
        balance:
          type: number
          format: float
        description:
          type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Category:
      type: object
      properties:
        id:
          type: integer
        user_id:
          type: integer
        name:
          type: string
        type:
          type: string
          enum: [income, expense]
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Customer:
      type: object
      properties:
        id:
          type: integer
        user_id:
          type: integer
        name:
          type: string
        document_type:
          type: string
          enum: [CPF, CNPJ]
        document_number:
          type: string
        email:
          type: string
        phone:
          type: string
        address:
          type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Receivable:
      type: object
      properties:
        id:
          type: integer
        user_id:
          type: integer
        customer_id:
          type: integer
        category_id:
          type: integer
        amount:
          type: number
          format: float
        remaining_amount:
          type: number
          format: float
        due_date:
          type: string
          format: date
        description:
          type: string
        status:
          type: string
          enum: [pending, partially_paid, paid]
        invoice_number:
          type: string
        payment_terms:
          type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Payment:
      type: object
      properties:
        id:
          type: integer
        receivable_id:
          type: integer
        amount:
          type: number
          format: float
        payment_date:
          type: string
          format: date
        payment_method:
          type: string
          enum: [cash, pix, credit_card, debit_card, bank_transfer]
        description:
          type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Transaction:
      type: object
      properties:
        id:
          type: integer
        user_id:
          type: integer
        account_id:
          type: integer
        category_id:
          type: integer
        type:
          type: string
          enum: [income, expense]
        amount:
          type: number
          format: float
        description:
          type: string
        date:
          type: string
          format: date
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Supplier:
      type: object
      properties:
        id:
          type: integer
        user_id:
          type: integer
        name:
          type: string
        document_type:
          type: string
          enum: [CPF, CNPJ]
        document_number:
          type: string
        email:
          type: string
        phone:
          type: string
        address:
          type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Payable:
      type: object
      properties:
        id:
          type: integer
        user_id:
          type: integer
        supplier_id:
          type: integer
        category_id:
          type: integer
        amount:
          type: number
          format: float
        remaining_amount:
          type: number
          format: float
        due_date:
          type: string
          format: date
        description:
          type: string
        status:
          type: string
          enum: [pending, partially_paid, paid]
        invoice_number:
          type: string
        payment_terms:
          type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

paths:
  /auth/register:
    post:
      tags:
        - Autenticação
      summary: Registra um novo usuário
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - email
                - password
              properties:
                name:
                  type: string
                email:
                  type: string
                password:
                  type: string
      responses:
        '201':
          description: Usuário registrado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                  user:
                    $ref: '#/components/schemas/User'
        '400':
          description: Dados inválidos
        '500':
          description: Erro interno do servidor

  /auth/login:
    post:
      tags:
        - Autenticação
      summary: Realiza login do usuário
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                password:
                  type: string
      responses:
        '200':
          description: Login realizado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                  user:
                    $ref: '#/components/schemas/User'
        '401':
          description: Credenciais inválidas
        '500':
          description: Erro interno do servidor

  /accounts:
    get:
      tags:
        - Contas
      summary: Lista todas as contas do usuário
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Lista de contas
          content:
            application/json:
              schema:
                type: object
                properties:
                  accounts:
                    type: array
                    items:
                      $ref: '#/components/schemas/Account'
                  totalBalance:
                    type: number
                    format: float
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor

    post:
      tags:
        - Contas
      summary: Cria uma nova conta
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - bank_name
                - account_type
                - balance
              properties:
                bank_name:
                  type: string
                account_type:
                  type: string
                balance:
                  type: number
                  format: float
                description:
                  type: string
      responses:
        '201':
          description: Conta criada com sucesso
        '400':
          description: Dados inválidos
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor

  /categories:
    get:
      tags:
        - Categorias
      summary: Lista todas as categorias do usuário
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Lista de categorias
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Category'
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor

    post:
      tags:
        - Categorias
      summary: Cria uma nova categoria
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - type
              properties:
                name:
                  type: string
                type:
                  type: string
                  enum: [income, expense]
      responses:
        '201':
          description: Categoria criada com sucesso
        '400':
          description: Dados inválidos
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor

  /customers:
    get:
      tags:
        - Clientes
      summary: Lista todos os clientes do usuário
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Lista de clientes
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Customer'
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor

    post:
      tags:
        - Clientes
      summary: Cria um novo cliente
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - documentType
                - documentNumber
              properties:
                name:
                  type: string
                documentType:
                  type: string
                  enum: [CPF, CNPJ]
                documentNumber:
                  type: string
                email:
                  type: string
                phone:
                  type: string
                address:
                  type: string
      responses:
        '201':
          description: Cliente criado com sucesso
        '400':
          description: Dados inválidos
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor

  /receivables:
    get:
      tags:
        - Contas a Receber
      summary: Lista todas as contas a receber do usuário
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: status
          schema:
            type: string
            enum: [pending, partially_paid, paid]
      responses:
        '200':
          description: Lista de contas a receber
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Receivable'
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor

    post:
      tags:
        - Contas a Receber
      summary: Cria uma nova conta a receber
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - customer_id
                - amount
                - due_date
                - description
              properties:
                customer_id:
                  type: integer
                category_id:
                  type: integer
                amount:
                  type: number
                  format: float
                due_date:
                  type: string
                  format: date
                description:
                  type: string
                invoice_number:
                  type: string
                payment_terms:
                  type: string
      responses:
        '201':
          description: Conta a receber criada com sucesso
        '400':
          description: Dados inválidos
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor

  /receivables/{id}/payments:
    post:
      tags:
        - Contas a Receber
      summary: Registra um pagamento para uma conta a receber
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - amount
                - payment_date
                - payment_method
                - account_id
              properties:
                amount:
                  type: number
                  format: float
                payment_date:
                  type: string
                  format: date
                payment_method:
                  type: string
                  enum: [cash, pix, credit_card, debit_card, bank_transfer]
                description:
                  type: string
                account_id:
                  type: integer
      responses:
        '201':
          description: Pagamento registrado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  payment:
                    $ref: '#/components/schemas/Payment'
                  newBalance:
                    type: number
                    format: float
        '400':
          description: Dados inválidos
        '401':
          description: Não autorizado
        '404':
          description: Conta a receber não encontrada
        '500':
          description: Erro interno do servidor

  /transactions:
    get:
      tags:
        - Transações
      summary: Lista todas as transações do usuário
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: startDate
          schema:
            type: string
            format: date
        - in: query
          name: endDate
          schema:
            type: string
            format: date
        - in: query
          name: type
          schema:
            type: string
            enum: [income, expense]
        - in: query
          name: category_id
          schema:
            type: integer
        - in: query
          name: account_id
          schema:
            type: integer
      responses:
        '200':
          description: Lista de transações
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Transaction'
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor

    post:
      tags:
        - Transações
      summary: Cria uma nova transação
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - account_id
                - category_id
                - type
                - amount
                - description
              properties:
                account_id:
                  type: integer
                category_id:
                  type: integer
                type:
                  type: string
                  enum: [income, expense]
                amount:
                  type: number
                  format: float
                description:
                  type: string
                date:
                  type: string
                  format: date
      responses:
        '201':
          description: Transação criada com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  transactionId:
                    type: integer
                  newBalance:
                    type: number
                    format: float
        '400':
          description: Dados inválidos
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor

# --- PAYABLES ---
  /payables:
    get:
      tags: [Contas a Pagar]
      summary: Lista todas as contas a pagar do usuário
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Lista de contas a pagar
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Payable'
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor
    post:
      tags: [Contas a Pagar]
      summary: Cria uma nova conta a pagar
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - supplier_id
                - amount
                - due_date
                - description
              properties:
                supplier_id:
                  type: integer
                category_id:
                  type: integer
                amount:
                  type: number
                  format: float
                due_date:
                  type: string
                  format: date
                description:
                  type: string
                invoice_number:
                  type: string
                payment_terms:
                  type: string
      responses:
        '201':
          description: Conta a pagar criada com sucesso
        '400':
          description: Dados inválidos
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor
  /payables/upcoming-due:
    get:
      tags: [Contas a Pagar]
      summary: Lista contas a pagar a vencer nos próximos dias
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Lista de contas a pagar a vencer
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Payable'
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor
  /payables/overdue:
    get:
      tags: [Contas a Pagar]
      summary: Lista contas a pagar vencidas
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Lista de contas a pagar vencidas
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Payable'
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor
  /payables/{id}:
    get:
      tags: [Contas a Pagar]
      summary: Busca uma conta a pagar específica
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Conta a pagar encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payable'
        '401':
          description: Não autorizado
        '404':
          description: Conta a pagar não encontrada
        '500':
          description: Erro interno do servidor
    patch:
      tags: [Contas a Pagar]
      summary: Atualiza uma conta a pagar
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                amount:
                  type: number
                  format: float
                due_date:
                  type: string
                  format: date
                description:
                  type: string
                status:
                  type: string
                  enum: [pending, partially_paid, paid]
      responses:
        '200':
          description: Conta a pagar atualizada com sucesso
        '400':
          description: Dados inválidos
        '401':
          description: Não autorizado
        '404':
          description: Conta a pagar não encontrada
        '500':
          description: Erro interno do servidor
    delete:
      tags: [Contas a Pagar]
      summary: Remove uma conta a pagar
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: Conta a pagar removida com sucesso
        '401':
          description: Não autorizado
        '404':
          description: Conta a pagar não encontrada
        '500':
          description: Erro interno do servidor
  /payables/{id}/payments:
    get:
      tags: [Contas a Pagar]
      summary: Lista pagamentos de uma conta a pagar
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Lista de pagamentos
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Payment'
        '401':
          description: Não autorizado
        '404':
          description: Conta a pagar não encontrada
        '500':
          description: Erro interno do servidor
    post:
      tags: [Contas a Pagar]
      summary: Adiciona um pagamento a uma conta a pagar
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - amount
                - payment_date
                - payment_method
                - account_id
              properties:
                amount:
                  type: number
                  format: float
                payment_date:
                  type: string
                  format: date
                payment_method:
                  type: string
                  enum: [cash, pix, credit_card, debit_card, bank_transfer]
                description:
                  type: string
                account_id:
                  type: integer
      responses:
        '201':
          description: Pagamento registrado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment'
        '400':
          description: Dados inválidos
        '401':
          description: Não autorizado
        '404':
          description: Conta a pagar não encontrada
        '500':
          description: Erro interno do servidor

# --- SUPPLIERS ---
  /suppliers:
    get:
      tags: [Fornecedores]
      summary: Lista todos os fornecedores do usuário
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Lista de fornecedores
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Supplier'
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor
    post:
      tags: [Fornecedores]
      summary: Cria um novo fornecedor
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - documentType
                - documentNumber
              properties:
                name:
                  type: string
                documentType:
                  type: string
                  enum: [CPF, CNPJ]
                documentNumber:
                  type: string
                email:
                  type: string
                phone:
                  type: string
                address:
                  type: string
      responses:
        '201':
          description: Fornecedor criado com sucesso
        '400':
          description: Dados inválidos
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor
  /suppliers/{id}:
    get:
      tags: [Fornecedores]
      summary: Busca um fornecedor específico
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Fornecedor encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Supplier'
        '401':
          description: Não autorizado
        '404':
          description: Fornecedor não encontrado
        '500':
          description: Erro interno do servidor
    put:
      tags: [Fornecedores]
      summary: Atualiza um fornecedor
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                documentType:
                  type: string
                  enum: [CPF, CNPJ]
                documentNumber:
                  type: string
                email:
                  type: string
                phone:
                  type: string
                address:
                  type: string
      responses:
        '200':
          description: Fornecedor atualizado com sucesso
        '400':
          description: Dados inválidos
        '401':
          description: Não autorizado
        '404':
          description: Fornecedor não encontrado
        '500':
          description: Erro interno do servidor
    delete:
      tags: [Fornecedores]
      summary: Remove um fornecedor
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: Fornecedor removido com sucesso
        '401':
          description: Não autorizado
        '404':
          description: Fornecedor não encontrado
        '500':
          description: Erro interno do servidor

# --- PAYMENTS ---
  /payables/{payable_id}/payments:
    get:
      tags: [Pagamentos]
      summary: Lista pagamentos de uma conta a pagar
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: payable_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Lista de pagamentos
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Payment'
        '401':
          description: Não autorizado
        '404':
          description: Conta a pagar não encontrada
        '500':
          description: Erro interno do servidor
    post:
      tags: [Pagamentos]
      summary: Cria um pagamento para uma conta a pagar
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: payable_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - amount
                - payment_date
                - payment_method
                - account_id
              properties:
                amount:
                  type: number
                  format: float
                payment_date:
                  type: string
                  format: date
                payment_method:
                  type: string
                  enum: [cash, pix, credit_card, debit_card, bank_transfer]
                description:
                  type: string
                account_id:
                  type: integer
      responses:
        '201':
          description: Pagamento criado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment'
        '400':
          description: Dados inválidos
        '401':
          description: Não autorizado
        '404':
          description: Conta a pagar não encontrada
        '500':
          description: Erro interno do servidor
  /payments/{id}:
    delete:
      tags: [Pagamentos]
      summary: Remove um pagamento
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: Pagamento removido com sucesso
        '401':
          description: Não autorizado
        '404':
          description: Pagamento não encontrado
        '500':
          description: Erro interno do servidor

# --- CUSTOMERS ---
  /customers/{id}:
    get:
      tags: [Clientes]
      summary: Busca um cliente específico
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Cliente encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'
        '401':
          description: Não autorizado
        '404':
          description: Cliente não encontrado
        '500':
          description: Erro interno do servidor
    put:
      tags: [Clientes]
      summary: Atualiza um cliente
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                documentType:
                  type: string
                  enum: [CPF, CNPJ]
                documentNumber:
                  type: string
                email:
                  type: string
                phone:
                  type: string
                address:
                  type: string
      responses:
        '200':
          description: Cliente atualizado com sucesso
        '400':
          description: Dados inválidos
        '401':
          description: Não autorizado
        '404':
          description: Cliente não encontrado
        '500':
          description: Erro interno do servidor
    delete:
      tags: [Clientes]
      summary: Remove um cliente
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: Cliente removido com sucesso
        '401':
          description: Não autorizado
        '404':
          description: Cliente não encontrado
        '500':
          description: Erro interno do servidor
  /customers/{id}/receivables:
    get:
      tags: [Clientes]
      summary: Lista contas a receber de um cliente
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Lista de contas a receber
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Receivable'
        '401':
          description: Não autorizado
        '404':
          description: Cliente não encontrado
        '500':
          description: Erro interno do servidor

# --- RECEIVABLES ---
  /receivables/upcoming-due:
    get:
      tags: [Contas a Receber]
      summary: Lista contas a receber a vencer nos próximos dias
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Lista de contas a receber a vencer
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Receivable'
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor
  /receivables/overdue:
    get:
      tags: [Contas a Receber]
      summary: Lista contas a receber vencidas
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Lista de contas a receber vencidas
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Receivable'
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor
  /receivables/{id}:
    get:
      tags: [Contas a Receber]
      summary: Busca uma conta a receber específica
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Conta a receber encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Receivable'
        '401':
          description: Não autorizado
        '404':
          description: Conta a receber não encontrada
        '500':
          description: Erro interno do servidor
    patch:
      tags: [Contas a Receber]
      summary: Atualiza uma conta a receber
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                amount:
                  type: number
                  format: float
                due_date:
                  type: string
                  format: date
                description:
                  type: string
                status:
                  type: string
                  enum: [pending, partially_paid, paid]
      responses:
        '200':
          description: Conta a receber atualizada com sucesso
        '400':
          description: Dados inválidos
        '401':
          description: Não autorizado
        '404':
          description: Conta a receber não encontrada
        '500':
          description: Erro interno do servidor
    delete:
      tags: [Contas a Receber]
      summary: Remove uma conta a receber
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: Conta a receber removida com sucesso
        '401':
          description: Não autorizado
        '404':
          description: Conta a receber não encontrada
        '500':
          description: Erro interno do servidor
  /receivables/{id}/payments:
    get:
      tags: [Contas a Receber]
      summary: Lista pagamentos de uma conta a receber
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Lista de pagamentos
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Payment'
        '401':
          description: Não autorizado
        '404':
          description: Conta a receber não encontrada
        '500':
          description: Erro interno do servidor
    post:
      tags: [Contas a Receber]
      summary: Registra um pagamento para uma conta a receber
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - amount
                - payment_date
                - payment_method
                - account_id
              properties:
                amount:
                  type: number
                  format: float
                payment_date:
                  type: string
                  format: date
                payment_method:
                  type: string
                  enum: [cash, pix, credit_card, debit_card, bank_transfer]
                description:
                  type: string
                account_id:
                  type: integer
      responses:
        '201':
          description: Pagamento registrado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  payment:
                    $ref: '#/components/schemas/Payment'
                  newBalance:
                    type: number
                    format: float
        '400':
          description: Dados inválidos
        '401':
          description: Não autorizado
        '404':
          description: Conta a receber não encontrada
        '500':
          description: Erro interno do servidor

# --- TRANSACTIONS ---
  /transactions/categories:
    get:
      tags: [Transações]
      summary: Lista categorias disponíveis para transações
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Lista de categorias
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Category'
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor
  /transactions/summary:
    get:
      tags: [Transações]
      summary: Obtém resumo das transações
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: startDate
          schema:
            type: string
            format: date
        - in: query
          name: endDate
          schema:
            type: string
            format: date
      responses:
        '200':
          description: Resumo das transações
          content:
            application/json:
              schema:
                type: object
                properties:
                  totalIncome:
                    type: number
                    format: float
                  totalExpense:
                    type: number
                    format: float
                  balance:
                    type: number
                    format: float
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor
  /transactions/balance:
    get:
      tags: [Transações]
      summary: Obtém saldo por período
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: startDate
          schema:
            type: string
            format: date
        - in: query
          name: endDate
          schema:
            type: string
            format: date
      responses:
        '200':
          description: Saldo por período
          content:
            application/json:
              schema:
                type: object
                properties:
                  balance:
                    type: number
                    format: float
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor
  /transactions/{id}:
    get:
      tags: [Transações]
      summary: Busca uma transação específica
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Transação encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Transaction'
        '401':
          description: Não autorizado
        '404':
          description: Transação não encontrada
        '500':
          description: Erro interno do servidor
    put:
      tags: [Transações]
      summary: Atualiza uma transação
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                account_id:
                  type: integer
                category_id:
                  type: integer
                type:
                  type: string
                  enum: [income, expense]
                amount:
                  type: number
                  format: float
                description:
                  type: string
                date:
                  type: string
                  format: date
      responses:
        '200':
          description: Transação atualizada com sucesso
        '400':
          description: Dados inválidos
        '401':
          description: Não autorizado
        '404':
          description: Transação não encontrada
        '500':
          description: Erro interno do servidor
    delete:
      tags: [Transações]
      summary: Remove uma transação
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: Transação removida com sucesso
        '401':
          description: Não autorizado
        '404':
          description: Transação não encontrada
        '500':
          description: Erro interno do servidor

# --- ACCOUNTS ---
  /accounts/{id}:
    get:
      tags: [Contas]
      summary: Busca uma conta específica
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Conta encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Account'
        '401':
          description: Não autorizado
        '404':
          description: Conta não encontrada
        '500':
          description: Erro interno do servidor
    put:
      tags: [Contas]
      summary: Atualiza uma conta
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                bank_name:
                  type: string
                account_type:
                  type: string
                balance:
                  type: number
                  format: float
                description:
                  type: string
      responses:
        '200':
          description: Conta atualizada com sucesso
        '400':
          description: Dados inválidos
        '401':
          description: Não autorizado
        '404':
          description: Conta não encontrada
        '500':
          description: Erro interno do servidor
    delete:
      tags: [Contas]
      summary: Remove uma conta
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: Conta removida com sucesso
        '401':
          description: Não autorizado
        '404':
          description: Conta não encontrada
        '500':
          description: Erro interno do servidor

# --- CATEGORIES ---
  /categories/{id}:
    put:
      tags: [Categorias]
      summary: Atualiza uma categoria
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                type:
                  type: string
                  enum: [income, expense]
      responses:
        '200':
          description: Categoria atualizada com sucesso
        '400':
          description: Dados inválidos
        '401':
          description: Não autorizado
        '404':
          description: Categoria não encontrada
        '500':
          description: Erro interno do servidor
    delete:
      tags: [Categorias]
      summary: Remove uma categoria
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: Categoria removida com sucesso
        '401':
          description: Não autorizado
        '404':
          description: Categoria não encontrada
        '500':
          description: Erro interno do servidor

# --- AUTH ---
  /auth/forgot-password:
    post:
      tags: [Autenticação]
      summary: Solicita redefinição de senha
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
              properties:
                email:
                  type: string
      responses:
        '200':
          description: Email de redefinição enviado
        '400':
          description: Dados inválidos
        '404':
          description: Email não encontrado
        '500':
          description: Erro interno do servidor
  /auth/reset-password:
    post:
      tags: [Autenticação]
      summary: Redefine a senha
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - token
                - password
              properties:
                token:
                  type: string
                password:
                  type: string
      responses:
        '200':
          description: Senha redefinida com sucesso
        '400':
          description: Dados inválidos
        '401':
          description: Token inválido
        '500':
          description: Erro interno do servidor
  /auth/profile:
    get:
      tags: [Autenticação]
      summary: Obtém perfil do usuário
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Perfil do usuário
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor
    put:
      tags: [Autenticação]
      summary: Atualiza perfil do usuário
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                email:
                  type: string
      responses:
        '200':
          description: Perfil atualizado com sucesso
        '400':
          description: Dados inválidos
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor
  /auth/password:
    put:
      tags: [Autenticação]
      summary: Atualiza senha do usuário
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - currentPassword
                - newPassword
              properties:
                currentPassword:
                  type: string
                newPassword:
                  type: string
      responses:
        '200':
          description: Senha atualizada com sucesso
        '400':
          description: Dados inválidos
        '401':
          description: Senha atual incorreta
        '500':
          description: Erro interno do servidor
  /auth/2fa/setup:
    post:
      tags: [Autenticação]
      summary: Configura autenticação de dois fatores
      security:
        - bearerAuth: []
      responses:
        '200':
          description: 2FA configurado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  qrCode:
                    type: string
                  secret:
                    type: string
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor
  /auth/2fa/verify:
    post:
      tags: [Autenticação]
      summary: Verifica código 2FA
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - code
              properties:
                code:
                  type: string
      responses:
        '200':
          description: Código verificado com sucesso
        '400':
          description: Dados inválidos
        '401':
          description: Código inválido
        '500':
          description: Erro interno do servidor
  /auth/2fa/disable:
    post:
      tags: [Autenticação]
      summary: Desabilita autenticação de dois fatores
      security:
        - bearerAuth: []
      responses:
        '200':
          description: 2FA desabilitado com sucesso
        '401':
          description: Não autorizado
        '500':
          description: Erro interno do servidor 